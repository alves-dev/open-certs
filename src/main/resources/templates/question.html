<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{base :: layout(
          title='Question | OpenCerts',
          pageHeader='Question - ' + ${certification.displayName},
          content=~{::content},
          styles=~{::styles},
          scripts=~{::scripts}
      )}">
<th:block th:fragment="styles">
    <style>
        /* Estilizando os botões */
        button[type="submit"],
        a[href$='Skip question'] { /* Seleciona o link de 'Skip question' */
            padding: 10px 20px;
            margin-right: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none; /* Para o link */
            display: inline-block;
            text-align: center;
            transition: background-color 0.3s ease;
            font-weight: bold;
        }

        /* Estilo para o botão de Submeter (Check answer) */
        button[type="submit"] {
            background-color: #007bff; /* Azul */
            color: white;
        }

        button[type="submit"]:hover {
            background-color: #0056b3;
        }

        /* Estilo para o link de Pular (Skip question) */
        a[href$='Skip question'] {
            background-color: #6c757d; /* Cinza */
            color: white;
        }

        a[href$='Skip question']:hover {
            background-color: #5a6268;
        }

        /* Melhorando o layout da lista de respostas (opcional, mas melhora a visualização) */
        ul {
            list-style: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Estilo para focar o input de rádio/checkbox (para acessibilidade/UX) */
        li:has(input:focus) {
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
    </style>
</th:block>

<th:block th:fragment="content">
    <div class="card">
        <h2 th:text="${certification.displayName}"></h2>

        <div th:if="${noQuestion}">
            <p>This certification has no questions yet.</p>
            <p>
                How about contributing by creating a new one?
                <a th:href="@{/questions/new(certId=${certification.id})}">Create question</a>
            </p>
        </div>

        <div th:unless="${noQuestion}">
            <p>
                <strong>Topic</strong>: <span th:text="${question.topic}"></span>
            </p>
            <p>
                <strong>Description</strong>: <span th:text="${question.description}"></span>
            </p>
            <p>
                <strong>Type</strong>: <span
                    th:text="${question.isMultipleChoice ? 'Multiple choice' : 'Single choice'}"></span>
            </p>

            <form th:action="@{/questions/{id}/check(id=${certification.id})}" method="post">
                <input type="hidden" name="questionId" th:value="${question.id}"/>

                <ul>
                    <li th:each="resp, iterStat : ${answers}">
                        <label>
                            <input th:type="${question.isMultipleChoice} ? 'checkbox' : 'radio'"
                                   th:name="selectedOptions"
                                   th:value="${resp.text}">
                            <span th:text="${resp.text}"></span>
                        </label>
                    </li>
                </ul>

                <button type="submit">Check answer</button>
                <a th:href="@{/questions/{id}(id=${certification.id})}">Skip question</a>
            </form>

            <div th:if="${isCorrect != null}">
                <p th:text="${isCorrect ? '✅ Correct answer!' : '❌ Wrong answer!'}"></p>
            </div>
        </div>
    </div>
</th:block>

<th:block th:fragment="scripts">
    <script>
        console.log("Página Dashboard carregada com sucesso.");
    </script>
</th:block>
</html>